"use strict";(self.webpackChunksap_ai_sdk_documentation=self.webpackChunksap_ai_sdk_documentation||[]).push([[2778],{7737:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>S,contentTitle:()=>N,default:()=>E,frontMatter:()=>M,metadata:()=>a,toc:()=>I});const a=JSON.parse('{"id":"tutorials/getting-started-with-agents","title":"Getting Started with Agents using LangChain","description":"Building a Travel Itinerary Assistant with LangGraph and LangChain Client","source":"@site/docs-js/tutorials/getting-started-with-agents.mdx","sourceDirName":"tutorials","slug":"/tutorials/getting-started-with-agents","permalink":"/ai-sdk/docs/js/tutorials/getting-started-with-agents","draft":false,"unlisted":false,"editUrl":"https://github.com/SAP/ai-sdk/edit/main/docs-js/tutorials/getting-started-with-agents.mdx","tags":[],"version":"current","frontMatter":{"id":"getting-started-with-agents","title":"Getting Started with Agents using LangChain","sidebar_label":"Getting Started with Agents","description":"Building a Travel Itinerary Assistant with LangGraph and LangChain Client","keywords":["tutorial","agents","langgraph","langchain","openai","orchestration"]},"sidebar":"docsJsSidebar","previous":{"title":"Prompt Registry","permalink":"/ai-sdk/docs/js/ai-core/prompt-registry"},"next":{"title":"Error Handling","permalink":"/ai-sdk/docs/js/error-handling"}}');var s=t(4848),r=t(8453),o=t(6540),i=t(4164),l=t(3104),c=t(6347),d=t(205),u=t(7485),h=t(1682),g=t(679);function m(e){return o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,o.useMemo)((()=>{const e=n??function(e){return m(e).map((({props:{value:e,label:n,attributes:t,default:a}})=>({value:e,label:n,attributes:t,default:a})))}(t);return function(e){const n=(0,h.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function f({value:e,tabValues:n}){return n.some((n=>n.value===e))}function y({queryString:e=!1,groupId:n}){const t=(0,c.W6)(),a=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,u.aZ)(a),(0,o.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(t.location.search);n.set(a,e),t.replace({...t.location,search:n.toString()})}),[a,t])]}function w(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,s=p(e),[r,i]=(0,o.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!f({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s}))),[l,c]=y({queryString:t,groupId:a}),[u,h]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,a]=(0,g.Dv)(n);return[t,(0,o.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:a}),m=(()=>{const e=l??u;return f({value:e,tabValues:s})?e:null})();(0,d.A)((()=>{m&&i(m)}),[m]);return{selectedValue:r,selectValue:(0,o.useCallback)((e=>{if(!f({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);i(e),c(e),h(e)}),[c,h,s]),tabValues:s}}var x=t(2303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function j({className:e,block:n,selectedValue:t,selectValue:a,tabValues:r}){const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),d=e=>{const n=e.currentTarget,s=o.indexOf(n),i=r[s].value;i!==t&&(c(n),a(i))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,s.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:r.map((({value:e,label:n,attributes:a})=>(0,s.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{o.push(e)},onKeyDown:u,onClick:d,...a,className:(0,i.A)("tabs__item",v.tabItem,a?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function b({lazy:e,children:n,selectedValue:t}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find((e=>e.props.value===t));return e?(0,o.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,s.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function k(e){const n=w(e);return(0,s.jsxs)("div",{className:(0,i.A)("tabs-container",v.tabList),children:[(0,s.jsx)(j,{...n,...e}),(0,s.jsx)(b,{...n,...e})]})}function C(e){const n=(0,x.A)();return(0,s.jsx)(k,{...e,children:m(e.children)},String(n))}const A={tabItem:"tabItem_Ymn6"};function T({children:e,hidden:n,className:t}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,i.A)(A.tabItem,t),hidden:n,children:e})}const M={id:"getting-started-with-agents",title:"Getting Started with Agents using LangChain",sidebar_label:"Getting Started with Agents",description:"Building a Travel Itinerary Assistant with LangGraph and LangChain Client",keywords:["tutorial","agents","langgraph","langchain","openai","orchestration"]},N=void 0,S={},I=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"Define Mock Tools",id:"define-mock-tools",level:2},{value:"Setup the Agent",id:"setup-the-agent",level:2},{value:"Define Agent Logic and LangGraph Flow",id:"define-agent-logic-and-langgraph-flow",level:2},{value:"Build the Workflow",id:"build-the-workflow",level:2},{value:"Run the assistant",id:"run-the-assistant",level:2},{value:"Full Code",id:"full-code",level:2},{value:"Summary",id:"summary",level:2}];function L(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsxs)(n.p,{children:["In this tutorial, you'll build a simple travel assistant agent using a LangChain Client, either ",(0,s.jsx)(n.code,{children:"OrchestrationClient"})," or ",(0,s.jsx)(n.code,{children:"AzureOpenAiChatClient"})," from the ",(0,s.jsx)(n.code,{children:"@sap-ai-sdk/langchain"})," package alongside ",(0,s.jsx)(n.code,{children:"LangGraph"}),".\nThe agent creates an itinerary based on current weather conditions and supports follow-up queries."]}),"\n",(0,s.jsx)(n.p,{children:"The assistant performs these steps:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Accepts a user travel request."}),"\n",(0,s.jsx)(n.li,{children:"Calls a weather tool to fetch the current weather."}),"\n",(0,s.jsx)(n.li,{children:"Creates a weather-aware 3-item itinerary, including restaurant recommendations."}),"\n",(0,s.jsx)(n.li,{children:"Asks for human input (via interruption) when confirmation is required."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.p,{children:["Refer to prerequisites outlined ",(0,s.jsx)(n.a,{href:"../../overview-cloud-sdk-for-ai-js#prerequisites",children:"here"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"This tutorial assumes you have a basic understanding of TypeScript, LLMs and LangChain concepts."}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.p,{children:"Install the following dependencies:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install @sap-ai-sdk/langchain langchain @langchain/langgraph @langchain/core zod\n"})}),"\n",(0,s.jsx)(n.h2,{id:"define-mock-tools",children:"Define Mock Tools"}),"\n",(0,s.jsx)(n.p,{children:"Define tools:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"get_weather"})," for returning weather by city"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"get_restaurants"})," for city-based restaurant recommendations"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"This example uses mocked data for simplicity.\nReplace the tools' implementation with real API calls to integrate live data."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { tool } from '@langchain/core/tools';\nimport { z } from 'zod';\n\nconst mockWeatherData: Record<\n  string,\n  { temperature: string; condition: string }\n> = {\n  paris: { temperature: '22\xb0C', condition: 'Mild and pleasant' },\n  reykjavik: { temperature: '3\xb0C', condition: 'Cold and windy' }\n};\n\nconst mockRestaurantData: Record<string, string[]> = {\n  paris: ['Le Comptoir du Relais', \"L'As du Fallafel\", 'Breizh Caf\xe9'],\n  reykjavik: ['Dill Restaurant', 'Fish Market', 'Grillmarka\xf0urinn']\n};\n\nconst getWeatherTool = tool(\n  async ({ city }) => {\n    const weather = mockWeatherData[city.toLowerCase()];\n    return weather\n      ? `Current weather in ${city}: ${weather.temperature}, ${weather.condition}`\n      : `Weather data not available for ${city}.`;\n  },\n  {\n    name: 'get_weather',\n    description: 'Get current weather information for a city',\n    schema: z.object({ city: z.string().describe('The city name') })\n  }\n);\n\nconst getRestaurantsTool = tool(\n  async ({ city }) => {\n    const restaurants = mockRestaurantData[city.toLowerCase()];\n    return restaurants\n      ? `Popular restaurants in ${city}: ${restaurants.join(', ')}`\n      : `No restaurant data available for ${city}.`;\n  },\n  {\n    name: 'get_restaurants',\n    description: 'Get restaurant recommendations for a city',\n    schema: z.object({ city: z.string().describe('The city name') })\n  }\n);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"setup-the-agent",children:"Setup the Agent"}),"\n",(0,s.jsxs)(n.p,{children:["Initialize the client and add tools using the ",(0,s.jsx)(n.code,{children:"buildTools()"})," method.\nSet up a ",(0,s.jsx)(n.code,{children:"ToolNode"})," for routing tool calls."]}),"\n",(0,s.jsxs)(C,{groupId:"client",defaultValue:"orchestration",values:[{label:"Orchestration Client",value:"orchestration"},{label:"OpenAI Client",value:"openai"}],children:[(0,s.jsx)(T,{value:"openai",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { AzureOpenAiChatClient } from '@sap-ai-sdk/langchain';\nimport { ToolNode } from '@langchain/langgraph/prebuilt';\n\nconst tools = [getWeatherTool, getRestaurantsTool];\n\n// Create a model\nconst model = new AzureOpenAiChatClient({\n  modelName: 'gpt-4o',\n  temperature: 0.7\n});\n\n// create a model with access to the tools\nconst modelWithTools = model.bindTools(tools);\n\nconst toolNode = new ToolNode(tools);\n"})})}),(0,s.jsx)(T,{value:"orchestration",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { OrchestrationClient } from '@sap-ai-sdk/langchain';\nimport { ToolNode } from '@langchain/langgraph/prebuilt';\n\nconst tools = [getWeatherTool, getRestaurantsTool];\n\n// Create a model\nconst model = new OrchestrationClient({\n  modelName: 'gpt-4o',\n  temperature: 0.7\n});\n\n// create a model with access to the tools\nconst modelWithTools = model.bindTools(tools);\n\nconst toolNode = new ToolNode(tools);\n"})})})]}),"\n",(0,s.jsx)(n.h2,{id:"define-agent-logic-and-langgraph-flow",children:"Define Agent Logic and LangGraph Flow"}),"\n",(0,s.jsxs)(n.p,{children:["Configure a ",(0,s.jsx)(n.code,{children:"StateGraph"})," that routes between ",(0,s.jsx)(n.code,{children:"agent"})," \u2192 ",(0,s.jsx)(n.code,{children:"tool"})," \u2192 ",(0,s.jsx)(n.code,{children:"agent"}),", and uses intelligent routing to determine when to ask for human input or end the conversation."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {\n  StateGraph,\n  MessagesAnnotation,\n  MemorySaver,\n  START,\n  interrupt,\n  END\n} from '@langchain/langgraph';\nimport { AIMessage } from '@langchain/core/messages';\n\nasync function shouldContinueAgent({\n  messages\n}: typeof MessagesAnnotation.State) {\n  const lastMessage = messages.at(-1) as AIMessage;\n\n  // If there are tool calls, go to tools\n  if (lastMessage.tool_calls?.length) {\n    return 'tools';\n  }\n  // Check if agent's message is a farewell (indicating user was satisfied)\n  const result = await model.invoke([\n    new SystemMessage(\n      'You are a classifier. Respond with exactly \"FAREWELL\" if this is a farewell/goodbye message wishing someone happy travels. Respond with exactly \"CONTINUE\" if the conversation should continue.'\n    ),\n    new HumanMessage(`Assistant message: \"${lastMessage.content}\"`)\n  ]);\n\n  return result.content === 'FAREWELL' ? END : 'askHuman';\n}\n\nasync function askHuman() {\n  // This is where the actual interrupt happens\n  const humanResponse: string = interrupt(\n    `Do you want to adjust the itinerary?`\n  );\n  return { messages: [new HumanMessage(humanResponse)] };\n}\n\nasync function callModel({ messages }: typeof MessagesAnnotation.State) {\n  const response = await model.invoke(messages);\n  return { messages: [response] };\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"build-the-workflow",children:"Build the Workflow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const workflow = new StateGraph(MessagesAnnotation)\n  .addNode('agent', callModel)\n  .addNode('tools', toolNode)\n  .addNode('askHuman', askHuman)\n  .addConditionalEdges('agent', shouldContinue, ['tools', 'askHuman', END])\n  .addEdge('tools', 'agent')\n  .addEdge('askHuman', 'agent')\n  .addEdge(START, 'agent');\n\nconst memory = new MemorySaver();\nconst app = workflow.compile({ checkpointer: memory });\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Using ",(0,s.jsx)(n.a,{href:"https://langchain-ai.github.io/langgraphjs/how-tos/persistence/?h=memory+saver#add-memory",children:(0,s.jsx)(n.code,{children:"MemorySaver"})})," allows sharing context across multiple interactions in a single conversational thread (",(0,s.jsx)(n.code,{children:"conv-1"}),").\nIn this example, it enables the agent to remember the previously mentioned city."]})}),"\n",(0,s.jsx)(n.h2,{id:"run-the-assistant",children:"Run the assistant"}),"\n",(0,s.jsx)(n.p,{children:"The following example simulates a full interaction, with detailed console output at each step:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"The assistant receives an initial itinerary request and fetches weather data."}),"\n",(0,s.jsx)(n.li,{children:"It creates a weather-aware itinerary with restaurant recommendations and asks for user feedback."}),"\n",(0,s.jsx)(n.li,{children:"It handles follow-up requests and modifications based on user input."}),"\n",(0,s.jsx)(n.li,{children:"The conversation continues until the user is satisfied."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { HumanMessage, SystemMessage } from '@langchain/core/messages';\nimport { Command } from '@langchain/langgraph';\n\nconst config = { configurable: { thread_id: 'conv-1' } };\n\n// Initial system prompt and user message\nconst initMessages = [\n  new SystemMessage(\n    `You are a helpful travel assistant.\n        You will generate a 3-item itinerary based on a provided city. You should use weather forecast and restaurant recommendations when creating the itinerary.\n        After presenting the itinerary, ask the user if they are satisfied with it or if they want to make changes.`\n  ),\n  new HumanMessage(\n    \"I'm traveling to Paris. Can you help me prepare an itinerary?\"\n  )\n];\n\ntry {\n  let response = await app.invoke({ messages: initMessages }, config);\n"})}),"\n",(0,s.jsx)(n.p,{children:"When the agent receives the initial request, it first determines that it needs both weather and restaurant data to create a comprehensive itinerary.\nThe LLM response includes tool calls to gather this information:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"tool_calls": [\n  {\n    "id": "call_bnMuoAGpN6zUnpEm1DwqykvV",\n    "name": "get_weather",\n    "args": {\n      "city": "Paris"\n    },\n    "type": "tool_call"\n  },\n  {\n    "id": "call_NnlDugZMjAd4JrSqBa4lFpHE",\n    "name": "get_restaurants",\n    "args": {\n      "city": "Paris"\n    },\n    "type": "tool_call"\n  }\n]\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The agent executes these tool calls through the ",(0,s.jsx)(n.code,{children:"tools"})," node to gather the necessary data, then returns to the agent node to generate a natural language response with the complete itinerary."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"console.log('Assistant:', response.messages.at(-1)?.content);\nconsole.log('next: ', (await app.getState(config)).next);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"Assistant: Here's a 3-item itinerary for your visit to Paris:\n\n1. **Morning: Explore the Louvre Museum**\n   - Start your day by visiting the world-renowned Louvre Museum. Take your time to explore its vast collection of art and history.\n   - Weather: 22\xb0C, Mild and pleasant \u2013 perfect for a stroll through the museum and its gardens.\n\n2. **Afternoon: Lunch at Le Comptoir du Relais**\n   - Enjoy a delicious lunch at Le Comptoir du Relais, a popular Parisian restaurant known for its authentic French cuisine.\n   - After lunch, you can take a leisurely walk around the nearby Saint-Germain-des-Pr\xe9s area, soaking in the Parisian ambiance.\n\n3. **Evening: Dinner at L'As du Fallafel**\n   - Head to L'As du Fallafel for dinner, where you can savor some of the best falafel in the city. It's a unique spot that offers a taste of multicultural Paris.\n   - You can conclude your evening with a walk in the vibrant Marais district, where the restaurant is located.\n\nWould you like to make any changes to this itinerary or add something else?\n"})}),"\n",(0,s.jsxs)(n.p,{children:["After presenting the itinerary, the graph pauses at the ",(0,s.jsx)(n.code,{children:"askHuman"})," node and waits for the human's response."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"next:  [ 'askHuman' ]\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Provide the response by invoking the graph with a ",(0,s.jsx)(n.code,{children:'new Command({ resume: <follow_up_question>" })'})," input:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"response = await app.invoke(\n  new Command({ resume: 'Can you suggest something more outdorsy?' }),\n  config\n);\n\nconsole.log('Assistant:', response.messages.at(-1).content);\n"})}),"\n",(0,s.jsx)(n.p,{children:"The assistant responds with an updated itinerary:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"Assistant: Here's an updated itinerary with more outdoor activities:\n\n1. **Morning: Visit the Eiffel Tower and Picnic at Champ de Mars**\n   - Start your day with a visit to the iconic Eiffel Tower. You can either marvel at its structure from below or take a ride to the top for breathtaking views of Paris.\n   - Weather: 22\xb0C, Mild and pleasant \u2013 ideal for an outdoor picnic.\n   - After the visit, enjoy a relaxing picnic at the nearby Champ de Mars park, where you can unwind and soak in the views.\n\n2. **Afternoon: Stroll Along the Seine River**\n   - Spend your afternoon walking along the Seine River. You can admire the beautiful bridges and architecture, and maybe even catch a boat tour for a different perspective of the city.\n   - Stop by a local caf\xe9 for a light lunch or grab a snack from one of the nearby street vendors.\n\n3. **Evening: Dinner at Breizh Caf\xe9**\n   - Conclude your day with dinner at Breizh Caf\xe9, known for its delicious cr\xeapes. It's located in a charming area where you can enjoy a pleasant outdoor dining experience.\n   - After dinner, take a leisurely walk through the lively streets of the Marais district and enjoy the evening atmosphere.\n\nDoes this itinerary suit your preferences, or would you like further adjustments?\n"})}),"\n",(0,s.jsx)(n.p,{children:"The agent loop ends when the user expresses satisfaction with the proposed itinerary."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"  response = await app.invoke(new Command({ resume: 'Great! Looks perfect' }), config);\n\n  console.log('Assistant:', response.messages.at(-1)?.content);\n\n  } catch (error) {\n    console.error('Error:', error);\n  }\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"Assistant: I'm glad you like the itinerary! If you have any more questions or need further assistance while planning your trip, feel free to reach out. Enjoy your time in Paris! Safe travels! \ud83c\udf1f\n"})}),"\n",(0,s.jsx)(n.h2,{id:"full-code",children:"Full Code"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Travel Itinerary Planner Agent"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {\n  StateGraph,\n  MessagesAnnotation,\n  MemorySaver,\n  START,\n  END,\n  interrupt,\n  Command\n} from '@langchain/langgraph';\nimport { ToolNode } from '@langchain/langgraph/prebuilt';\nimport { AzureOpenAiChatClient } from '@sap-ai-sdk/langchain';\nimport { HumanMessage, SystemMessage } from '@langchain/core/messages';\nimport { tool } from '@langchain/core/tools';\nimport { z } from 'zod';\nimport type { AIMessage } from '@langchain/core/messages';\n/**\n * This example demonstrates how to create a travel itinerary assistant using LangGraph.\n * The assistant can check the weather and recommend restaurants based on the city provided.\n * It uses tools to fetch weather and restaurant data, and maintains conversation context.\n */\nconst mockWeatherData: Record<\n  string,\n  { temperature: string; condition: string }\n> = {\n  paris: { temperature: '22\xb0C', condition: 'Mild and pleasant' },\n  reykjavik: { temperature: '3\xb0C', condition: 'Cold and windy' }\n};\n\nconst mockRestaurantData: Record<string, string[]> = {\n  paris: ['Le Comptoir du Relais', \"L'As du Fallafel\", 'Breizh Caf\xe9'],\n  reykjavik: ['Dill Restaurant', 'Fish Market', 'Grillmarka\xf0urinn']\n};\n\nconst getWeatherTool = tool(\n  async ({ city }) => {\n    const weather = mockWeatherData[city.toLowerCase()];\n    return weather\n      ? `Current weather in ${city}: ${weather.temperature}, ${weather.condition}`\n      : `Weather data not available for ${city}.`;\n  },\n  {\n    name: 'get_weather',\n    description: 'Get current weather information for a city',\n    schema: z.object({ city: z.string().describe('The city name') })\n  }\n);\n\nconst getRestaurantsTool = tool(\n  async ({ city }) => {\n    const restaurants = mockRestaurantData[city.toLowerCase()];\n    return restaurants\n      ? `Popular restaurants in ${city}: ${restaurants.join(', ')}`\n      : `No restaurant data available for ${city}.`;\n  },\n  {\n    name: 'get_restaurants',\n    description: 'Get restaurant recommendations for a city',\n    schema: z.object({ city: z.string().describe('The city name') })\n  }\n);\n\n// Define the tools for the agent to use\nconst tools = [getWeatherTool, getRestaurantsTool];\nconst toolNode = new ToolNode(tools);\n\n// Create a model\nconst model = new AzureOpenAiChatClient({\n  modelName: 'gpt-4o',\n  temperature: 0.7\n});\n\n// create a model with access to the tools\nconst modelWithTools = model.bindTools(tools);\n\nasync function shouldContinueAgent({\n  messages\n}: typeof MessagesAnnotation.State) {\n  const lastMessage = messages.at(-1) as AIMessage;\n\n  // If there are tool calls, go to tools\n  if (lastMessage.tool_calls?.length) {\n    return 'tools';\n  }\n  // Check if agent's message is a farewell (indicating user was satisfied)\n  const result = await model.invoke([\n    new SystemMessage(\n      'You are a classifier. Respond with exactly \"FAREWELL\" if this is a farewell/goodbye message wishing someone happy travels. Respond with exactly \"CONTINUE\" if the conversation should continue.'\n    ),\n    new HumanMessage(`Assistant message: \"${lastMessage.content}\"`)\n  ]);\n\n  return result.content === 'FAREWELL' ? END : 'askHuman';\n}\n\nasync function askHuman() {\n  // This is where the actual interrupt happens\n  const humanResponse: string = interrupt(\n    'Do you want to adjust the itinerary?'\n  );\n  return { messages: [new HumanMessage(humanResponse)] };\n}\n\nasync function callModel({ messages }: typeof MessagesAnnotation.State) {\n  const response = await modelWithTools.invoke(messages);\n  return { messages: [response] };\n}\n\nconst workflow = new StateGraph(MessagesAnnotation)\n  .addNode('agent', callModel)\n  .addNode('tools', toolNode)\n  .addNode('askHuman', askHuman)\n  .addConditionalEdges('agent', shouldContinueAgent, ['tools', 'askHuman', END])\n  .addEdge('tools', 'agent')\n  .addEdge('askHuman', 'agent')\n  .addEdge(START, 'agent');\n\nconst memory = new MemorySaver();\nconst app = workflow.compile({ checkpointer: memory });\n\nconst config = { configurable: { thread_id: 'conv-1' } };\n\n// Initial system prompt and user message\nconst initMessages = [\n  new SystemMessage(\n    `You are a helpful travel assistant.  \n        You will generate a 3-item itinerary based on a provided city. You should use weather forecast and restaurant recommendations when creating the itinerary.\n        After presenting the itinerary, ask the user if they are satisfied with it or if they want to make changes.`\n  ),\n  new HumanMessage(\n    \"I'm traveling to Paris. Can you help me prepare an itinerary?\"\n  )\n];\n\n// Start the agent with initial messages\ntry {\n  let response = await app.invoke({ messages: initMessages }, config);\n\n  console.log('Assistant:', response.messages.at(-1)?.content);\n  console.log('next: ', (await app.getState(config)).next);\n\n  response = await app.invoke(\n    new Command({ resume: 'Can you suggest something more outdoorsy?' }),\n    config\n  );\n\n  console.log('Assistant:', response.messages.at(-1)?.content);\n\n  response = await app.invoke(\n    new Command({ resume: 'Great! Looks perfect' }),\n    config\n  );\n  console.log('Assistant:', response.messages.at(-1)?.content);\n} catch (error) {\n  console.error('Error:', error);\n}\n"})})]}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"This tutorial demonstrates how to implement a simple agent workflow using:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"AzureOpenAiChatClient"})," with ",(0,s.jsx)(n.code,{children:"bindTools()"})," method to integrate external capabilities."]}),"\n",(0,s.jsxs)(n.li,{children:["Defining a LangGraph ",(0,s.jsx)(n.code,{children:"StateGraph"})," for branching logic and conditional tool use."]}),"\n",(0,s.jsxs)(n.li,{children:["Interrupting the flow with a human tool via ",(0,s.jsx)(n.code,{children:"interrupt()"})," and handling it inside the graph."]}),"\n",(0,s.jsxs)(n.li,{children:["Maintaining context across interactions with ",(0,s.jsx)(n.code,{children:"MemorySaver"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Explore additional capabilities and patterns in ",(0,s.jsx)(n.a,{href:"https://langchain-ai.github.io/langgraphjs/tutorials/quickstart/",children:"LangGraph documentation"}),"."]})]})}function E(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(L,{...e})}):L(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var a=t(6540);const s={},r=a.createContext(s);function o(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);