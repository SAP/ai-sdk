"use strict";(self.webpackChunksap_ai_sdk_documentation=self.webpackChunksap_ai_sdk_documentation||[]).push([[38],{1984:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"ai-core/ai-api","title":"AI API","description":"How to use SAP Cloud SDK for AI to interact with SAP AI Core.","source":"@site/docs-js/ai-core/ai-api.mdx","sourceDirName":"ai-core","slug":"/ai-core/ai-api","permalink":"/ai-sdk/docs/js/ai-core/ai-api","draft":false,"unlisted":false,"editUrl":"https://github.com/SAP/ai-sdk/edit/main/docs-js/ai-core/ai-api.mdx","tags":[],"version":"current","frontMatter":{"id":"ai-api","title":"AI API","hide_title":false,"hide_table_of_contents":false,"description":"How to use SAP Cloud SDK for AI to interact with SAP AI Core.","keywords":["sap","cloud","sdk","ai","ai core","ai-api"]},"sidebar":"docsJsSidebar","previous":{"title":"OpenAI Integration","permalink":"/ai-sdk/docs/js/langchain/openai"},"next":{"title":"Document Grounding","permalink":"/ai-sdk/docs/js/ai-core/document-grounding"}}');var a=t(4848),o=t(8453);const s={id:"ai-api",title:"AI API",hide_title:!1,hide_table_of_contents:!1,description:"How to use SAP Cloud SDK for AI to interact with SAP AI Core.",keywords:["sap","cloud","sdk","ai","ai core","ai-api"]},r=void 0,l={},c=[{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Create an Artifact",id:"create-an-artifact",level:3},{value:"Create a Configuration",id:"create-a-configuration",level:3},{value:"Create a Deployment",id:"create-a-deployment",level:3},{value:"Delete a Deployment",id:"delete-a-deployment",level:3},{value:"Custom Destination",id:"custom-destination",level:3},{value:"Resolve a Deployment URL",id:"resolve-a-deployment-url",level:3},{value:"Resilience",id:"resilience",level:2},{value:"Adding resilience",id:"adding-resilience",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"@sap-ai-sdk/ai-api"})," package provides tools to manage scenarios and workflows in SAP AI Core."]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Streamline data preprocessing and model training pipelines."}),"\n",(0,a.jsx)(n.li,{children:"Execute batch inference jobs."}),"\n",(0,a.jsx)(n.li,{children:"Deploy inference endpoints for trained models."}),"\n",(0,a.jsx)(n.li,{children:"Register custom Docker registries, sync AI content from Git repositories, and register object storage for training data and model artifacts."}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["We maintain a list of ",(0,a.jsx)(n.a,{href:"https://github.com/SAP/ai-sdk-js/blob/main/docs/list-tested-APIs.md",children:"currently available and tested AI Core APIs"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm install @sap-ai-sdk/ai-api\n"})}),"\n",(0,a.jsxs)(n.admonition,{type:"important",children:[(0,a.jsx)(n.p,{children:"This package contains generated code.\nUpdates to this package may include breaking changes."}),(0,a.jsxs)(n.p,{children:["To ensure compatibility and manage updates effectively, we strongly recommend using the tilde (",(0,a.jsx)(n.code,{children:"~"}),") version range in your project instead of the caret (",(0,a.jsx)(n.code,{children:"^"}),").\nThis approach will allow patch-level updates while preventing potentially breaking minor version changes."]})]}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsxs)(n.p,{children:["The examples below demonstrate the usage of the most commonly used APIs in SAP AI Core.\nIn addition to the examples below, you can find more sample code ",(0,a.jsx)(n.a,{href:"https://github.com/SAP/ai-sdk-js/blob/main/sample-code/src/ai-api",children:"here"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"create-an-artifact",children:"Create an Artifact"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"async function createArtifact() {\n  const requestBody: ArtifactPostData = {\n    name: 'training-test-dataset',\n    kind: 'dataset',\n    url: 'https://ai.example.com',\n    scenarioId: 'foundation-models'\n  };\n\n  const responseData: ArtifactCreationResponse =\n    await ArtifactApi.artifactCreate(requestBody, {\n      'AI-Resource-Group': 'default'\n    }).execute();\n  return responseData;\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"create-a-configuration",children:"Create a Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"async function createConfiguration() {\n  const requestBody: ConfigurationBaseData = {\n    name: 'gpt-4o',\n    executableId: 'azure-openai',\n    scenarioId: 'foundation-models',\n    parameterBindings: [\n      {\n        key: 'modelName',\n        value: 'gpt-4o'\n      },\n      {\n        key: 'modelVersion',\n        value: 'latest'\n      }\n    ],\n    inputArtifactBindings: []\n  };\n\n  const responseData: ConfigurationCreationResponse =\n    await ConfigurationApi.configurationCreate(requestBody, {\n      'AI-Resource-Group': 'default'\n    }).execute();\n  return responseData;\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"create-a-deployment",children:"Create a Deployment"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"async function createDeployment() {\n  const requestBody: DeploymentCreationRequest = {\n    configurationId: '0a1b2c3d-4e5f6g7h'\n  };\n  const responseData: DeploymentCreationResponse =\n    await DeploymentApi.deploymentCreate(requestBody, {\n      'AI-Resource-Group': 'default'\n    }).execute();\n  return responseData;\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"delete-a-deployment",children:"Delete a Deployment"}),"\n",(0,a.jsxs)(n.p,{children:["Only deployments with ",(0,a.jsx)(n.code,{children:"targetStatus: STOPPED"})," can be deleted.\nThus, a modification request must be sent before deletion can occur."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"async function modifyDeployment() {\n  let deploymentId: string = '0a1b2c3d4e5f';\n\n  const deployment: DeploymentResponseWithDetails =\n    await DeploymentApi.deploymentGet(\n      deploymentId,\n      {},\n      { 'AI-Resource-Group': 'default' }\n    ).execute();\n\n  if (deployment.targetStatus === 'RUNNING') {\n    // Only RUNNING deployments can be STOPPED.\n    const requestBody: DeploymentModificationRequest = {\n      targetStatus: 'STOPPED'\n    };\n\n    await DeploymentApi.deploymentModify(deploymentId, requestBody, {\n      'AI-Resource-Group': 'default'\n    }).execute();\n  }\n  // Wait a few seconds for the deployment to stop\n  return DeploymentApi.deploymentDelete(deploymentId, {\n    'AI-Resource-Group': 'default'\n  }).execute();\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"custom-destination",children:"Custom Destination"}),"\n",(0,a.jsxs)(n.p,{children:["When calling the ",(0,a.jsx)(n.code,{children:"execute()"})," method, it is possible to provide a custom destination for your SAP AI Core instance.\nFor example, when querying deployments targeting a destination with the name ",(0,a.jsx)(n.code,{children:"my-destination"}),", the following code can be used:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const queryParams = status ? { status } : {};\nreturn DeploymentApi.deploymentQuery(queryParams, {\n  'AI-Resource-Group': resourceGroup\n}).execute({\n  destinationName: 'my-destination'\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:["By default, the fetched destination is cached.\nTo disable caching, set the ",(0,a.jsx)(n.code,{children:"useCache"})," parameter to ",(0,a.jsx)(n.code,{children:"false"})," together with the ",(0,a.jsx)(n.code,{children:"destinationName"})," parameter."]}),"\n",(0,a.jsxs)(n.p,{children:["For more information about configuring a destination, refer to the ",(0,a.jsx)(n.a,{href:"../connecting-to-ai-core#using-a-destination",children:"Using a Destination"})," section."]}),"\n",(0,a.jsx)(n.h3,{id:"resolve-a-deployment-url",children:"Resolve a Deployment URL"}),"\n",(0,a.jsxs)(n.p,{children:["Use ",(0,a.jsx)(n.code,{children:"resolveDeploymentUrl()"})," method to get deployment URL that matches the given criteria."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"import { resolveDeploymentUrl } from '@sap-ai-sdk/ai-api';\n\nconst deploymentUrl = await resolveDeploymentUrl({\n  scenarioId: 'foundation-models',\n  model: { name: 'gpt-4o' }\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"resilience",children:"Resilience"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"@sap-cloud-sdk/resilience"})," package uses the SAP Cloud SDK for JavaScript HTTP client, which provides built-in resilience features to handle transient failures and improve reliability."]}),"\n",(0,a.jsx)(n.h3,{id:"adding-resilience",children:"Adding resilience"}),"\n",(0,a.jsx)(n.p,{children:"Pass some basic parameters for the creation of the resilience middleware."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"import { resilience } from '@sap-cloud-sdk/resilience';\n\nconst [retry, circuitBreaker, timeout] = resilience({\n  timeout: 5000, // default true with 10 seconds timeout\n  circuitBreaker: false, // default true\n  retry: 3 // default false; set to a number to specify a retry count\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:["For advanced resilience patterns including circuit breaker functionality, refer to the ",(0,a.jsx)(n.a,{href:"https://sap.github.io/cloud-sdk/docs/js/guides/resilience",children:"SAP Cloud SDK documentation on resilience"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var i=t(6540);const a={},o=i.createContext(a);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);