"use strict";(self.webpackChunksap_ai_sdk_documentation=self.webpackChunksap_ai_sdk_documentation||[]).push([[7195],{6805:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"orchestration/embedding","title":"Embedding","description":"How to use the SAP AI SDK for Java to perform embedding tasks using Orchestration models deployed on SAP AI Core.","source":"@site/docs-java/orchestration/embedding.mdx","sourceDirName":"orchestration","slug":"/orchestration/embedding","permalink":"/ai-sdk/docs/java/orchestration/embedding","draft":false,"unlisted":false,"editUrl":"https://github.com/SAP/ai-sdk/edit/main/docs-java/orchestration/embedding.mdx","tags":[],"version":"current","frontMatter":{"id":"embedding","title":"Embedding","hide_title":false,"hide_table_of_contents":false,"description":"How to use the SAP AI SDK for Java to perform embedding tasks using Orchestration models deployed on SAP AI Core.","keywords":["sap","cloud","sdk","ai"]},"sidebar":"docsJavaSidebar","previous":{"title":"Chat Completion","permalink":"/ai-sdk/docs/java/orchestration/chat-completion"},"next":{"title":"Chat Completion","permalink":"/ai-sdk/docs/java/foundation-models/openai/chat-completion"}}');var i=t(4848),s=t(8453);const r={id:"embedding",title:"Embedding",hide_title:!1,hide_table_of_contents:!1,description:"How to use the SAP AI SDK for Java to perform embedding tasks using Orchestration models deployed on SAP AI Core.",keywords:["sap","cloud","sdk","ai"]},a=void 0,d={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Maven Dependencies",id:"maven-dependencies",level:3},{value:"Usage",id:"usage",level:2},{value:"Embedding",id:"embedding",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(n.p,{children:"This guide demonstrates how to use the SAP AI SDK for Java to perform embedding tasks using Orchestration models deployed on SAP AI Core."}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["All classes under any of the ",(0,i.jsx)(n.code,{children:"...model"})," packages are generated from an OpenAPI specification.\nThis means that these model classes are not guaranteed to be stable and may change with future releases.\nThey are safe to use, but may require updates even in minor releases."]})}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.p,{children:["Before using the AI Core module, ensure that you have met all the general requirements outlined in the ",(0,i.jsx)(n.a,{href:"../overview-cloud-sdk-for-ai-java#general-requirements",children:"overview"}),".\nAdditionally, include the necessary Maven dependency in your project."]}),"\n",(0,i.jsx)(n.h3,{id:"maven-dependencies",children:"Maven Dependencies"}),"\n",(0,i.jsxs)(n.p,{children:["Add the following dependency to your ",(0,i.jsx)(n.code,{children:"pom.xml"})," file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"<dependencies>\n    <dependency>\n        <groupId>com.sap.ai.sdk</groupId>\n        <artifactId>orchestration</artifactId>\n        <version>${ai-sdk.version}</version>\n    </dependency>\n</dependencies>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"https://github.com/SAP/ai-sdk-java/tree/main/sample-code/spring-app/pom.xml",children:"an example pom in our Spring Boot application"})]}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.p,{children:"In addition to the prerequisites above, we assume you have already set up the following to carry out the examples in this guide:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"A Deployed Orchestration Model in SAP AI Core"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Refer\nto ",(0,i.jsx)(n.a,{href:"https://help.sap.com/docs/sap-ai-core/sap-ai-core-service-guide/create-deployment-for-orchestration",children:"How to deploy a model to AI Core"}),"\nfor setup instructions."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In case the model is deployed in a custom resource group, refer to ",(0,i.jsx)(n.a,{href:"chat-completion#create-a-client-and-choose-an-llm",children:"this section"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(t,{children:[(0,i.jsxs)("summary",{children:["Example deployed model from the AI Core ",(0,i.jsx)("code",{children:"/deployments"})," endpoint"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "d123456abcdefg",\n  "deploymentUrl": "https://api.ai.intprod-eu12.eu-central-1.aws.ml.hana.ondemand.com/v2/inference/deployments/d123456abcdefg",\n  "configurationId": "12345-123-123-123-123456abcdefg",\n  "configurationName": "orchestration",\n  "scenarioId": "orchestration",\n  "status": "RUNNING",\n  "statusMessage": null,\n  "targetStatus": "RUNNING",\n  "lastOperation": "CREATE",\n  "latestRunningConfigurationId": "12345-123-123-123-123456abcdefg",\n  "ttl": null,\n  "createdAt": "2024-08-05T16:17:29Z",\n  "modifiedAt": "2024-08-06T06:32:50Z",\n  "submissionTime": "2024-08-05T16:17:40Z",\n  "startTime": "2024-08-05T16:18:41Z",\n  "completionTime": null\n}\n'})})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"embedding",children:"Embedding"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Since v1.11.0"})}),"\n",(0,i.jsx)(n.p,{children:"Get the embeddings of a text input in list of float values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'var request = OrchestrationEmbeddingRequest\n    .forModel(TEXT_EMBEDDING_3_SMALL)\n    .forInputs("I am John Doe")\n    .asDocument() // Optionally optimize for document content\n\nOrchestrationEmbeddingResponse response = client.embed(request);\nfloat[] embedding = response.getEmbeddingVectors().get(0);\n'})}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"https://github.com/SAP/ai-sdk-java/tree/main/sample-code/spring-app/src/main/java/com/sap/ai/sdk/app/services/OrchestrationService.java",children:"an example in our Spring Boot application"})," for more features including masking of sensitive data."]}),"\n",(0,i.jsx)(n.admonition,{title:"Integration with CAP",type:"tip",children:(0,i.jsxs)(n.p,{children:["In case you are using CAP, you can use the above code together with the native support for the ",(0,i.jsx)(n.a,{href:"https://cap.cloud.sap/docs/guides/databases-hana#vector-embeddings",children:"HANA Vector Store"}),"."]})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(6540);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);