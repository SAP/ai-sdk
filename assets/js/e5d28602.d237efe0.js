"use strict";(self.webpackChunksap_ai_sdk_documentation=self.webpackChunksap_ai_sdk_documentation||[]).push([[1687],{1470:(e,t,r)=>{r.d(t,{A:()=>C});var n=r(6540),o=r(4164),s=r(7559),a=r(3104),i=r(6347),c=r(205),l=r(7485),u=r(1682),p=r(679);function d(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function m(e){const{values:t,children:r}=e;return(0,n.useMemo)((()=>{const e=t??function(e){return d(e).map((({props:{value:e,label:t,attributes:r,default:n}})=>({value:e,label:t,attributes:r,default:n})))}(r);return function(e){const t=(0,u.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,r])}function h({value:e,tabValues:t}){return t.some((t=>t.value===e))}function g({queryString:e=!1,groupId:t}){const r=(0,i.W6)(),o=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,l.aZ)(o),(0,n.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(r.location.search);t.set(o,e),r.replace({...r.location,search:t.toString()})}),[o,r])]}function f(e){const{defaultValue:t,queryString:r=!1,groupId:o}=e,s=m(e),[a,i]=(0,n.useState)((()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:s}))),[l,u]=g({queryString:r,groupId:o}),[d,f]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,o]=(0,p.Dv)(t);return[r,(0,n.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:o}),b=(()=>{const e=l??d;return h({value:e,tabValues:s})?e:null})();(0,c.A)((()=>{b&&i(b)}),[b]);return{selectedValue:a,selectValue:(0,n.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),f(e)}),[u,f,s]),tabValues:s}}var b=r(2303);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=r(4848);function x({className:e,block:t,selectedValue:r,selectValue:n,tabValues:s}){const i=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),l=e=>{const t=e.currentTarget,o=i.indexOf(t),a=s[o].value;a!==r&&(c(t),n(a))},u=e=>{let t=null;switch(e.key){case"Enter":l(e);break;case"ArrowRight":{const r=i.indexOf(e.currentTarget)+1;t=i[r]??i[0];break}case"ArrowLeft":{const r=i.indexOf(e.currentTarget)-1;t=i[r]??i[i.length-1];break}}t?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":t},e),children:s.map((({value:e,label:t,attributes:n})=>(0,v.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{i.push(e)},onKeyDown:u,onClick:l,...n,className:(0,o.A)("tabs__item",y.tabItem,n?.className,{"tabs__item--active":r===e}),children:t??e},e)))})}function w({lazy:e,children:t,selectedValue:r}){const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=s.find((e=>e.props.value===r));return e?(0,n.cloneElement)(e,{className:(0,o.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==r})))})}function j(e){const t=f(e);return(0,v.jsxs)("div",{className:(0,o.A)(s.G.tabs.container,"tabs-container",y.tabList),children:[(0,v.jsx)(x,{...t,...e}),(0,v.jsx)(w,{...t,...e})]})}function C(e){const t=(0,b.A)();return(0,v.jsx)(j,{...e,children:d(e.children)},String(t))}},3067:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"tutorials/using-scoped-prompt-registry-templates","title":"Using Scoped Prompt Registry Templates","description":"Learn how to create orchestration deployments and use scoped prompt registry templates with custom headers for resource group isolation.","source":"@site/docs-js/tutorials/using-scoped-prompt-registry-templates.mdx","sourceDirName":"tutorials","slug":"/tutorials/using-scoped-prompt-registry-templates","permalink":"/ai-sdk/docs/js/tutorials/using-scoped-prompt-registry-templates","draft":false,"unlisted":false,"editUrl":"https://github.com/SAP/ai-sdk/edit/main/docs-js/tutorials/using-scoped-prompt-registry-templates.mdx","tags":[],"version":"current","frontMatter":{"id":"using-scoped-prompt-registry-templates","title":"Using Scoped Prompt Registry Templates","sidebar_label":"Scoped Prompt Registry Templates","description":"Learn how to create orchestration deployments and use scoped prompt registry templates with custom headers for resource group isolation.","keywords":["tutorial","orchestration","prompt registry","scoped templates","headers","resource groups"]},"sidebar":"docsJsSidebar","previous":{"title":"Getting Started with Agents","permalink":"/ai-sdk/docs/js/tutorials/getting-started-with-agents"},"next":{"title":"Error Handling","permalink":"/ai-sdk/docs/js/error-handling"}}');var o=r(4848),s=r(8453);r(1470),r(9365),r(6025);const a={id:"using-scoped-prompt-registry-templates",title:"Using Scoped Prompt Registry Templates",sidebar_label:"Scoped Prompt Registry Templates",description:"Learn how to create orchestration deployments and use scoped prompt registry templates with custom headers for resource group isolation.",keywords:["tutorial","orchestration","prompt registry","scoped templates","headers","resource groups"]},i=void 0,c={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Create a Configuration",id:"create-a-configuration",level:2},{value:"Create an Orchestration Deployment",id:"create-an-orchestration-deployment",level:2},{value:"Create Prompt Template with Specific Resource Group Scope",id:"create-prompt-template-with-specific-resource-group-scope",level:2},{value:"Consume Scoped Prompt Template in Orchestration client",id:"consume-scoped-prompt-template-in-orchestration-client",level:2},{value:"Summary",id:"summary",level:2}];function u(e){const t={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,o.jsx)(t.p,{children:"This tutorial demonstrates how to use scoped prompt registry templates with custom headers in the SAP AI Core orchestration service.\nScoped templates isolate prompt templates within specific resource groups, improving security and organizational control.\nFollow these steps to create an orchestration deployment and configure prompt templates with resource-group scoping using custom headers."}),"\n",(0,o.jsx)(t.h2,{id:"create-a-configuration",children:"Create a Configuration"}),"\n",(0,o.jsx)(t.p,{children:"If no configuration exists, create a configuration with the following code:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"const configurationPostData: AiConfigurationBaseData = {\n  name: 'CONFIG_EXAMPLE',\n  executableId: 'orchestration',\n  scenarioId: 'orchestration'\n};\n\nconst result: AiConfigurationCreationResponse =\n  await ConfigurationApi.configurationCreate(configurationPostData, {\n    'AI-Resource-Group': 'MY_RESOURCE_GROUP'\n  }).execute();\n"})}),"\n",(0,o.jsx)(t.h2,{id:"create-an-orchestration-deployment",children:"Create an Orchestration Deployment"}),"\n",(0,o.jsx)(t.p,{children:"Create an orchestration deployment for the target resource group if it does not exist already with the following code:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"const deploymentPostData: AiDeploymentCreationRequest = {\n  configurationId: '3d2c1b0a'\n};\n\nconst deploymentResponse = await createDeployment(deploymentPostData, {\n  'AI-Resource-Group': 'MY_RESOURCE_GROUP'\n});\n"})}),"\n",(0,o.jsx)(t.h2,{id:"create-prompt-template-with-specific-resource-group-scope",children:"Create Prompt Template with Specific Resource Group Scope"}),"\n",(0,o.jsx)(t.p,{children:"Create the prompt template with resource group scoping:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"const promptTemplate = await PromptTemplatesApi.createUpdatePromptTemplate(\n  {\n    name: 'MY_SCOPED_TEMPLATE',\n    scenario: 'MY_SCENARIO',\n    version: '0.0.1',\n    spec: {\n      template: [\n        {\n          content: 'Hello, world!',\n          role: 'user'\n        }\n      ]\n    }\n  },\n  {\n    'AI-Resource-Group-Scope': 'true',\n    'AI-Resource-Group': 'MY_RESOURCE_GROUP'\n  }\n).execute();\n"})}),"\n",(0,o.jsx)(t.h2,{id:"consume-scoped-prompt-template-in-orchestration-client",children:"Consume Scoped Prompt Template in Orchestration client"}),"\n",(0,o.jsx)(t.p,{children:"Create the orchestration client with custom headers for resource group scoping:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"import { OrchestrationClient } from '@sap-ai-sdk/orchestration';\n\nconst orchestrationClient = new OrchestrationClient(\n  {\n    promptTemplating: {\n      model: {\n        name: 'gpt-4o'\n      },\n      prompt: {\n        template_ref: {\n          name: 'MY_SCOPED_TEMPLATE',\n          scenario: 'MY_SCENARIO',\n          version: '1.0.0',\n          scope: 'resource_group'\n        }\n      }\n    }\n  },\n  {\n    resourceGroup: 'MY_RESOURCE_GROUP'\n  }\n);\n\nconst response = await orchestrationClient.chatCompletion({\n  messages: [{ role: 'user', content: 'Hello, how can I help you?' }]\n});\n"})}),"\n",(0,o.jsx)(t.p,{children:"This configuration scopes the prompt template to the specified resource group and uses the appropriate headers for access control."}),"\n",(0,o.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(t.p,{children:"This tutorial demonstrates how to use scoped prompt registry templates with resource group isolation:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Creating a configuration with ",(0,o.jsx)(t.code,{children:"AI-Resource-Group"})," and ",(0,o.jsx)(t.code,{children:"AI-Resource-Group-Scope"})," headers for resource group scoping."]}),"\n",(0,o.jsx)(t.li,{children:"Creating an orchestration deployment for a specific resource group."}),"\n",(0,o.jsx)(t.li,{children:"Creating a scoped prompt template in the prompt registry with resource group headers."}),"\n",(0,o.jsxs)(t.li,{children:["Consuming the scoped template using the ",(0,o.jsx)(t.code,{children:"OrchestrationClient"})," instance with ",(0,o.jsx)(t.code,{children:"resourceGroup"})," header configuration."]}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["Explore additional orchestration capabilities in the ",(0,o.jsx)(t.a,{href:"../orchestration/chat-completion",children:"Orchestration documentation"}),"."]})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>a,x:()=>i});var n=r(6540);const o={},s=n.createContext(o);function a(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),n.createElement(s.Provider,{value:t},e.children)}},9365:(e,t,r)=>{r.d(t,{A:()=>a});r(6540);var n=r(4164);const o={tabItem:"tabItem_Ymn6"};var s=r(4848);function a({children:e,hidden:t,className:r}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,n.A)(o.tabItem,r),hidden:t,children:e})}}}]);