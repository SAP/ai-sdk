---
id: embedding
title: Embedding
hide_title: false
hide_table_of_contents: false
description: How to use the SAP Cloud SDK for AI to perform embedding tasks using Azure OpenAI models through SAP AI Core.
keywords:
  - sap
  - cloud
  - sdk
  - ai
  - embedding
  - openai
---

Initialize the `AzureOpenAiEmbeddingClient` by following the instructions in the [Client Initialization](../../foundation-models#client-initialization) section.

Currently, the client sends request with Azure OpenAI API version `2024-10-21`.
We are continuously updating the client to match the latest API specification.
You can overwrite the API version by setting the `api-version` parameter in the `CustomRequestConfig` object.
Refer to the [Custom Request Configuration](../../foundation-models#custom-request-configuration) section for more details.

## Making Requests

```ts
const response = await client.run({
  input: 'AI is fascinating'
});
const embedding = response.getEmbedding();
```

## Resilience

The `@sap-cloud-sdk/resilience` package uses the SAP Cloud SDK for JavaScript HTTP client, which provides built-in resilience features to handle transient failures and improve reliability.

### Retry

The HTTP client automatically retries failed requests on transient errors (e.g., network issues, temporary server errors). You can customize retry behavior using the resilience library.

For example, to set a custom retry count:

```ts
import { retry } from '@sap-cloud-sdk/resilience';
import { executeHttpRequest } from '@sap-cloud-sdk/http-client';
import { getDestination } from '@sap-cloud-sdk/connectivity';

const destination = await getDestination('my-ai-core-destination');

const response = await executeHttpRequest(
  destination,
  {
    method: 'GET',
    url: '/api/executions'
  },
  {
    middleware: [
      retry({ maxRetries: 3, backoffType: 'exponential', initialDelay: 1000 })
    ]
  }
);
```

### Timeout

Configure timeout for requests to prevent hanging connections.
The default timeout is 10 seconds.

<!-- vale off -->

```ts
import { executeHttpRequest } from '@sap-cloud-sdk/http-client';

const response = await executeHttpRequest(
  destination,
  {
    method: 'GET',
    url: '/api/executions'
  },
  {
    timeout: 30000 // 30 seconds
  }
);
```

<!-- vale on -->

For advanced resilience patterns including circuit breaker functionality, refer to the [SAP Cloud SDK documentation on resilience](https://sap.github.io/cloud-sdk/docs/js/guides/resilience).
